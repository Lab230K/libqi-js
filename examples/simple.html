<!DOCTYPE html>
<html>

<head>
<title></title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://localhost:8001/socket.io.js"></script>
<script src="http://localhost:8001/qimessaging.js"></script>
</head>

<body>
<script language="JavaScript">
qim = new QiSession("http://localhost:8002");

qim.socket().on('connect', function() { console.log('connected') })

qim.services().done(gotServices);

function gotServices(services)
{
  console.log("Available services are:", services);

  qim.service("serviceTest").done(gotService);
}

function gotService(service)
{
  var methods = [];
  for (var m in service)
  {
    if (typeof service[m] == "function")
    {
      methods.push(m);
    }
  }
  console.log("Available methods for", service.__mobj.name, "are:", methods);

  service.reply("plaf").done(gotName);
}

function gotName(name)
{
  console.log(name)
}
</script>
</body>
</html>
